import{u as C,r as I,j as e,H as F,L as g,a as P}from"./app-C7rwmfcS.js";import{A}from"./AdminLayout-CyG2N3OH.js";import{F as S}from"./ChevronLeftIcon-DqE4ozVB.js";import{F as d}from"./PlusIcon-DZqqzlOP.js";import{F as o}from"./XMarkIcon-DQSo36bu.js";/* empty css            */import"./Squares2X2Icon-DJChz5O5.js";import"./TicketIcon-CH8U8-AR.js";import"./UserGroupIcon-BFqEtCNI.js";import"./portal-BgFUahiJ.js";import"./transition-Cy0wZH5_.js";import"./ChevronDownIcon-agjRIJMC.js";import"./UserIcon-DFOqjxtt.js";function W({destinations:h}){const{data:i,setData:r,post:f,errors:n,processing:c}=C({title:"",description:"",price:"",offer_price:"",duration_days:"",destination_id:"",image:null,available_dates:[""],inclusions:[""],itinerary:[{day:"1",title:"",description:""}],is_featured:!1,is_active:!0}),[m,u]=I.useState(null),p=s=>{s.preventDefault();const a=new FormData;Object.keys(i).forEach(t=>{t==="itinerary"||t==="available_dates"||t==="inclusions"?a.append(t,JSON.stringify(i[t])):(t==="image"&&i[t]||i[t]!==null&&i[t]!==void 0)&&a.append(t,i[t])}),f(route("admin.packages.store"),{forceFormData:!0,preserveScroll:!0,onSuccess:()=>P.visit(route("admin.packages.index"))})},b=s=>{const a=s.target.files[0];if(r("image",a),a){const t=new FileReader;t.onloadend=()=>{u(t.result)},t.readAsDataURL(a)}else u(null)},j=()=>{r("available_dates",[...i.available_dates,""])},y=(s,a)=>{const t=[...i.available_dates];t[s]=a,r("available_dates",t)},v=s=>{const a=i.available_dates.filter((t,l)=>l!==s);r("available_dates",a)},N=()=>{r("inclusions",[...i.inclusions,""])},w=(s,a)=>{const t=[...i.inclusions];t[s]=a,r("inclusions",t)},_=s=>{const a=i.inclusions.filter((t,l)=>l!==s);r("inclusions",a)},k=()=>{const s=i.itinerary.length+1;r("itinerary",[...i.itinerary,{day:s.toString(),title:"",description:""}])},x=(s,a,t)=>{const l=[...i.itinerary];l[s][a]=t,r("itinerary",l)},D=s=>{const a=i.itinerary.filter((t,l)=>l!==s);a.forEach((t,l)=>{t.day=(l+1).toString()}),r("itinerary",a)};return e.jsxs(A,{children:[e.jsx(F,{title:"Create Package"}),e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(g,{href:route("admin.packages.index"),className:"mr-4 text-gray-600 hover:text-gray-900",children:e.jsx(S,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Create New Package"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Fill in the details for the new travel package"})]})]}),e.jsxs("form",{onSubmit:p,className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),e.jsx("input",{type:"text",value:i.title,onChange:s=>r("title",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Bali Beach Paradise Getaway"}),n.title&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Destination *"}),e.jsxs("select",{value:i.destination_id,onChange:s=>r("destination_id",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[e.jsx("option",{value:"",children:"Select Destination"}),h.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),n.destination_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.destination_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price ($) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:i.price,onChange:s=>r("price",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"1599.99"}),n.price&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.price})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (Days) *"}),e.jsx("input",{type:"number",min:"1",value:i.duration_days,onChange:s=>r("duration_days",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"5"}),n.duration_days&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.duration_days})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),e.jsx("textarea",{value:i.description,onChange:s=>r("description",s.target.value),rows:"4",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Describe the package..."}),n.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Package Image"}),e.jsxs("div",{className:"mt-1 flex items-center",children:[e.jsx("div",{className:"mr-4",children:m?e.jsx("img",{src:m,alt:"Preview",className:"h-32 w-48 object-cover rounded"}):e.jsx("div",{className:"h-32 w-48 border-2 border-dashed border-gray-300 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-gray-400",children:"No image selected"})})}),e.jsxs("div",{children:[e.jsx("input",{type:"file",accept:"image/*",onChange:b,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"PNG, JPG, GIF up to 2MB"})]})]}),n.image&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.image})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Available Dates"}),e.jsxs("button",{type:"button",onClick:j,className:"text-sm text-indigo-600 hover:text-indigo-800",children:[e.jsx(d,{className:"h-4 w-4 inline mr-1"}),"Add Date"]})]}),e.jsx("div",{className:"space-y-2",children:i.available_dates.map((s,a)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"date",value:s,onChange:t=>y(a,t.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"}),i.available_dates.length>1&&e.jsx("button",{type:"button",onClick:()=>v(a),className:"ml-2 text-red-600 hover:text-red-800",children:e.jsx(o,{className:"h-5 w-5"})})]},a))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Inclusions (What's included)"}),e.jsxs("button",{type:"button",onClick:N,className:"text-sm text-indigo-600 hover:text-indigo-800",children:[e.jsx(d,{className:"h-4 w-4 inline mr-1"}),"Add Inclusion"]})]}),e.jsx("div",{className:"space-y-2",children:i.inclusions.map((s,a)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"text",value:s,onChange:t=>w(a,t.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Luxury accommodation, Breakfast, etc."}),i.inclusions.length>1&&e.jsx("button",{type:"button",onClick:()=>_(a),className:"ml-2 text-red-600 hover:text-red-800",children:e.jsx(o,{className:"h-5 w-5"})})]},a))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("label",{className:"block text-lg font-medium text-gray-700",children:"Itinerary"}),e.jsxs("button",{type:"button",onClick:k,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[e.jsx(d,{className:"h-4 w-4 mr-1"}),"Add Day"]})]}),e.jsx("div",{className:"space-y-4",children:i.itinerary.map((s,a)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("h4",{className:"font-medium text-gray-900",children:["Day ",s.day]}),i.itinerary.length>1&&e.jsx("button",{type:"button",onClick:()=>D(a),className:"text-red-600 hover:text-red-800",children:e.jsx(o,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),e.jsx("input",{type:"text",value:s.title,onChange:t=>x(a,"title",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Arrival in Bali"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:s.description,onChange:t=>x(a,"description",t.target.value),rows:"2",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Describe the day's activities..."})]})]})]},a))})]}),e.jsx("div",{className:"border-t border-gray-200 pt-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"is_featured",type:"checkbox",checked:i.is_featured,onChange:s=>r("is_featured",s.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"is_featured",className:"ml-2 block text-sm text-gray-900",children:"Mark as Featured Package"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"is_active",type:"checkbox",checked:i.is_active,onChange:s=>r("is_active",s.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-900",children:"Active (Visible to users)"})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsx(g,{href:route("admin.packages.index"),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:c,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:c?"Creating...":"Create Package"})]})]})]})})})})]})}export{W as default};
