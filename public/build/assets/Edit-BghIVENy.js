import{u as I,r as A,j as e,H as F,L as g,a as P}from"./app-C7rwmfcS.js";import{A as S}from"./AdminLayout-CyG2N3OH.js";import{F as E}from"./ChevronLeftIcon-DqE4ozVB.js";import{F as o}from"./PlusIcon-DZqqzlOP.js";import{F as c}from"./XMarkIcon-DQSo36bu.js";/* empty css            */import"./Squares2X2Icon-DJChz5O5.js";import"./TicketIcon-CH8U8-AR.js";import"./UserGroupIcon-BFqEtCNI.js";import"./portal-BgFUahiJ.js";import"./transition-Cy0wZH5_.js";import"./ChevronDownIcon-agjRIJMC.js";import"./UserIcon-DFOqjxtt.js";function z({package:n,destinations:h}){const{data:i,setData:r,put:b,errors:d,processing:m}=I({title:n.title||"",description:n.description||"",price:n.price||"",duration_days:n.duration_days||"",destination_id:n.destination_id||"",image:null,available_dates:n.available_dates||[""],inclusions:n.inclusions||[""],itinerary:n.itinerary||[{day:"1",title:"",description:""}],is_featured:n.is_featured||!1,is_active:n.is_active||!0}),[u,f]=A.useState(n.image?`/storage/${n.image}`:null),p=s=>{s.preventDefault(),b(route("admin.packages.update",n.id),{preserveScroll:!0,onSuccess:()=>{P.visit(route("admin.packages.index"))}})},y=s=>{const t=s.target.files[0];if(r("image",t),t){const a=new FileReader;a.onloadend=()=>{f(a.result)},a.readAsDataURL(t)}},j=()=>{r("available_dates",[...i.available_dates,""])},v=(s,t)=>{const a=[...i.available_dates];a[s]=t,r("available_dates",a)},N=s=>{const t=i.available_dates.filter((a,l)=>l!==s);r("available_dates",t)},w=()=>{r("inclusions",[...i.inclusions,""])},_=(s,t)=>{const a=[...i.inclusions];a[s]=t,r("inclusions",a)},k=s=>{const t=i.inclusions.filter((a,l)=>l!==s);r("inclusions",t)},D=()=>{const s=i.itinerary.length+1;r("itinerary",[...i.itinerary,{day:s.toString(),title:"",description:""}])},x=(s,t,a)=>{const l=[...i.itinerary];l[s][t]=a,r("itinerary",l)},C=s=>{const t=i.itinerary.filter((a,l)=>l!==s);t.forEach((a,l)=>{a.day=(l+1).toString()}),r("itinerary",t)};return e.jsxs(S,{children:[e.jsx(F,{title:"Edit Package"}),e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(g,{href:route("admin.packages.index"),className:"mr-4 text-gray-600 hover:text-gray-900",children:e.jsx(E,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Edit Package"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Update package details"})]})]}),e.jsxs("form",{onSubmit:p,className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),e.jsx("input",{type:"text",value:i.title,onChange:s=>r("title",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"}),d.title&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Destination *"}),e.jsxs("select",{value:i.destination_id,onChange:s=>r("destination_id",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[e.jsx("option",{value:"",children:"Select Destination"}),h.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),d.destination_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.destination_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price ($) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:i.price,onChange:s=>r("price",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"}),d.price&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.price})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (Days) *"}),e.jsx("input",{type:"number",min:"1",value:i.duration_days,onChange:s=>r("duration_days",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"}),d.duration_days&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.duration_days})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),e.jsx("textarea",{value:i.description,onChange:s=>r("description",s.target.value),rows:"4",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"}),d.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Package Image"}),e.jsxs("div",{className:"mt-1 flex items-center",children:[e.jsx("div",{className:"mr-4",children:u?e.jsxs("div",{children:[e.jsx("img",{src:u,alt:"Preview",className:"h-32 w-48 object-cover rounded"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Current image"})]}):e.jsx("div",{className:"h-32 w-48 border-2 border-dashed border-gray-300 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-gray-400",children:"No image"})})}),e.jsxs("div",{children:[e.jsx("input",{type:"file",accept:"image/*",onChange:y,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Leave empty to keep current image. PNG, JPG, GIF up to 2MB"})]})]}),d.image&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.image})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Available Dates"}),e.jsxs("button",{type:"button",onClick:j,className:"text-sm text-indigo-600 hover:text-indigo-800",children:[e.jsx(o,{className:"h-4 w-4 inline mr-1"}),"Add Date"]})]}),e.jsx("div",{className:"space-y-2",children:i.available_dates&&i.available_dates.map((s,t)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"date",value:s,onChange:a=>v(t,a.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"}),i.available_dates.length>1&&e.jsx("button",{type:"button",onClick:()=>N(t),className:"ml-2 text-red-600 hover:text-red-800",children:e.jsx(c,{className:"h-5 w-5"})})]},t))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Inclusions (What's included)"}),e.jsxs("button",{type:"button",onClick:w,className:"text-sm text-indigo-600 hover:text-indigo-800",children:[e.jsx(o,{className:"h-4 w-4 inline mr-1"}),"Add Inclusion"]})]}),e.jsx("div",{className:"space-y-2",children:i.inclusions&&i.inclusions.map((s,t)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"text",value:s,onChange:a=>_(t,a.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Luxury accommodation, Breakfast, etc."}),i.inclusions.length>1&&e.jsx("button",{type:"button",onClick:()=>k(t),className:"ml-2 text-red-600 hover:text-red-800",children:e.jsx(c,{className:"h-5 w-5"})})]},t))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("label",{className:"block text-lg font-medium text-gray-700",children:"Itinerary"}),e.jsxs("button",{type:"button",onClick:D,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[e.jsx(o,{className:"h-4 w-4 mr-1"}),"Add Day"]})]}),e.jsx("div",{className:"space-y-4",children:i.itinerary&&i.itinerary.map((s,t)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("h4",{className:"font-medium text-gray-900",children:["Day ",s.day]}),i.itinerary.length>1&&e.jsx("button",{type:"button",onClick:()=>C(t),className:"text-red-600 hover:text-red-800",children:e.jsx(c,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),e.jsx("input",{type:"text",value:s.title,onChange:a=>x(t,"title",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Arrival in Bali"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:s.description,onChange:a=>x(t,"description",a.target.value),rows:"2",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Describe the day's activities..."})]})]})]},t))})]}),e.jsx("div",{className:"border-t border-gray-200 pt-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"is_featured",type:"checkbox",checked:i.is_featured,onChange:s=>r("is_featured",s.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"is_featured",className:"ml-2 block text-sm text-gray-900",children:"Mark as Featured Package"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"is_active",type:"checkbox",checked:i.is_active,onChange:s=>r("is_active",s.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-900",children:"Active (Visible to users)"})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsx(g,{href:route("admin.packages.index"),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:m?"Updating...":"Update Package"})]})]})]})})})})]})}export{z as default};
