import{r as o,u as _,j as e,H as A,L as y,a as f}from"./app-C7rwmfcS.js";import{A as P}from"./AppLayout-CUogNpMW.js";import{F as S}from"./XMarkIcon-DQSo36bu.js";import{F as D}from"./UserCircleIcon-CgdGgCB2.js";/* empty css            */import"./UserIcon-DFOqjxtt.js";import"./index-CelJ9Fyp.js";function E({title:r,titleId:d,...i},c){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":d},i),r?o.createElement("title",{id:d},r):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"}))}const L=o.forwardRef(E);function M({title:r,titleId:d,...i},c){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":d},i),r?o.createElement("title",{id:d},r):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const b=o.forwardRef(M);function T({user:r}){const[d,i]=o.useState(r.avatar_url||null),[c,p]=o.useState(!1),[x,u]=o.useState(""),[h,m]=o.useState(""),{data:a,setData:n,patch:F,processing:j,errors:t}=_({name:r.name||"",email:r.email||"",phone:r.phone||"",address:r.address||"",avatar:null,current_password:"",password:"",password_confirmation:""}),v=s=>{s.preventDefault();const l=new FormData;l.append("name",a.name),l.append("email",a.email),l.append("phone",a.phone||""),l.append("address",a.address||""),a.avatar&&l.append("avatar",a.avatar),a.current_password&&l.append("current_password",a.current_password),a.password&&(l.append("password",a.password),l.append("password_confirmation",a.password_confirmation)),l.append("_method","PATCH"),f.post(route("profile.update"),l,{preserveScroll:!0,onSuccess:()=>{n({...a,current_password:"",password:"",password_confirmation:""})}})},N=s=>{const l=s.target.files[0];if(l){if(l.size>2*1024*1024){alert("File size should be less than 2MB");return}if(!l.type.match("image.*")){alert("Please select an image file");return}n("avatar",l);const g=new FileReader;g.onloadend=()=>{i(g.result)},g.readAsDataURL(l)}},k=()=>{confirm("Are you sure you want to remove your profile picture?")&&f.delete(route("profile.avatar.remove"),{preserveScroll:!0,onSuccess:()=>{i(null),n("avatar",null)}})},C=()=>{r.is_admin||p(!0)},w=()=>{if(m(""),!x){m("Please enter your password to confirm deletion.");return}f.delete(route("profile.destroy"),{data:{password:x},preserveScroll:!1,onError:s=>{s.password?m(s.password):m("An error occurred while deleting your account.")},onSuccess:()=>{window.location.href="/"}})};return e.jsxs(P,{title:"Profile",children:[e.jsx(A,{title:"Profile"}),e.jsxs("div",{className:"mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Profile Settings"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your account information and preferences"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Profile Information"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Profile Picture"}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"relative",children:[d?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:d,alt:"Profile",className:"h-24 w-24 rounded-full object-cover"}),e.jsx("button",{type:"button",onClick:k,className:"absolute -top-2 -right-2 bg-red-100 text-red-600 rounded-full p-1 hover:bg-red-200",children:e.jsx(S,{className:"h-4 w-4"})})]}):e.jsx("div",{className:"h-24 w-24 rounded-full bg-gray-200 flex items-center justify-center",children:e.jsx(D,{className:"h-12 w-12 text-gray-400"})}),e.jsxs("label",{className:"absolute bottom-0 right-0 bg-indigo-600 text-white p-2 rounded-full cursor-pointer hover:bg-indigo-700 transition-colors",children:[e.jsx(L,{className:"h-4 w-4"}),e.jsx("input",{type:"file",accept:"image/*",onChange:N,className:"hidden",id:"avatar-upload"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Upload a new profile picture. JPG, PNG or GIF, max 2MB."}),a.avatar&&e.jsxs("p",{className:"text-sm text-green-600 mt-1",children:["New image selected: ",a.avatar.name]}),e.jsx("button",{type:"button",onClick:()=>document.getElementById("avatar-upload").click(),className:"mt-2 text-sm text-indigo-600 hover:text-indigo-800",children:"Choose a different photo"})]})]}),t.avatar&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.avatar})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Full Name *"}),e.jsx("input",{type:"text",value:a.name,onChange:s=>n("name",s.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0}),t.name&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Email Address *"}),e.jsx("input",{type:"email",value:a.email,onChange:s=>n("email",s.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0}),t.email&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",value:a.phone,onChange:s=>n("phone",s.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"+1 (555) 123-4567"}),t.phone&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Address"}),e.jsx("textarea",{rows:3,value:a.address,onChange:s=>n("address",s.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"123 Main St, City, State, ZIP"}),t.address&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.address})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Update Password"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Ensure your account is using a long, random password to stay secure."}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Current Password"}),e.jsx("input",{type:"password",value:a.current_password,onChange:s=>n("current_password",s.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Leave blank to keep current password"}),t.current_password&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.current_password})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"New Password"}),e.jsx("input",{type:"password",value:a.password,onChange:s=>n("password",s.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Leave blank to keep current password"}),t.password&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.password})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Confirm New Password"}),e.jsx("input",{type:"password",value:a.password_confirmation,onChange:s=>n("password_confirmation",s.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Leave blank to keep current password"}),t.password_confirmation&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.password_confirmation})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>window.location.reload(),className:"inline-flex items-center rounded-md border border-gray-300 bg-white px-6 py-3 text-sm font-semibold text-gray-700 shadow-sm hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:j,className:"inline-flex items-center rounded-md bg-indigo-600 px-6 py-3 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:j?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Changes"})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Account Summary"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Member Since"}),e.jsx("p",{className:"font-medium text-gray-900",children:new Date(r.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Account Type"}),e.jsx("p",{className:"font-medium text-gray-900",children:r.is_admin?e.jsx("span",{className:"inline-flex items-center rounded-md bg-purple-100 px-2 py-1 text-xs font-medium text-purple-700",children:"Administrator"}):e.jsx("span",{className:"inline-flex items-center rounded-md bg-green-100 px-2 py-1 text-xs font-medium text-green-700",children:"Standard User"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Email Verified"}),e.jsx("p",{className:"font-medium text-gray-900",children:r.email_verified_at?e.jsx("span",{className:"text-green-600",children:"Verified"}):e.jsx("span",{className:"text-yellow-600",children:"Not Verified"})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Links"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(y,{href:route("user.bookings"),className:"block p-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"My Bookings"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"View and manage your travel bookings"})]}),e.jsxs(y,{href:route("dashboard"),className:"block p-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Dashboard"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Back to your dashboard"})]})]})]}),!r.is_admin&&e.jsx("div",{className:"bg-red-50 border border-red-100 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(b,{className:"h-5 w-5 text-red-400 mt-0.5 mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900",children:"Delete Account"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:"Once you delete your account, all of your data will be permanently removed. This action cannot be undone."}),c?e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-red-900 mb-1",children:"Enter your password to confirm deletion"}),e.jsx("input",{type:"password",value:x,onChange:s=>u(s.target.value),className:"w-full rounded-md border-red-300 shadow-sm focus:border-red-500 focus:ring-red-500",placeholder:"Your current password"}),h&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"button",onClick:w,className:"bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 font-medium transition-colors",children:"Confirm Delete"}),e.jsx("button",{type:"button",onClick:()=>{p(!1),u(""),m("")},className:"bg-gray-200 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-300 font-medium transition-colors",children:"Cancel"})]})]}):e.jsx("button",{type:"button",onClick:C,className:"mt-4 bg-white text-red-600 border border-red-300 py-2 px-4 rounded-md hover:bg-red-50 font-medium transition-colors",children:"Delete My Account"})]})]})})]})]}),r.is_admin&&e.jsx("div",{className:"mt-6 bg-yellow-50 border border-yellow-100 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(b,{className:"h-5 w-5 text-yellow-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-yellow-900",children:"Administrator Account"}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"As an administrator, you cannot delete your account through this interface. Please contact the system administrator for account management."})]})]})})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(b,{className:"h-6 w-6 text-red-600 mr-3"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Account Confirmation"})]}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Are you sure you want to delete your account? This action will:"}),e.jsxs("ul",{className:"text-sm text-gray-600 mb-6 space-y-2",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-red-500 mr-2",children:"•"}),"Permanently delete all your personal data"]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-red-500 mr-2",children:"•"}),"Cancel all your active bookings"]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-red-500 mr-2",children:"•"}),"Remove your access to the system"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-1",children:"Enter your password to confirm"}),e.jsx("input",{type:"password",value:x,onChange:s=>u(s.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500",placeholder:"Your current password"}),h&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:w,className:"flex-1 bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 font-medium",children:"Yes, Delete My Account"}),e.jsx("button",{onClick:()=>{p(!1),u(""),m("")},className:"flex-1 bg-gray-200 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-300 font-medium",children:"Cancel"})]})]})]})})]})}export{T as default};
